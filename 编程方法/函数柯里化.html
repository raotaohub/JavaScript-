<!--
 * @Author: raotaohub
 * @Date: 2020-12-21 23:36:52
 * @LastEditTime: 2021-09-14 21:13:41
 * @LastEditors: raotaohub
 * @FilePath: \Speaking-JavaScript\柯里化.html
 * @Description: Edit......
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>柯里化</title>
</head>

<body>
<div>
  <h3>柯里化的作用</h3>
  <div>
    <br/>
    <b
    >是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。</b
    >
    <br/>
    <br/>
    <div>
      当函数参数接收满后，才调用最终函数，否则返回接收剩余参数的<b>函数</b>
    </div>
  </div>
</div>
<script>
    // 函数柯里化通行版本
    function currying(fn) {
        let argsArr = [...arguments].slice(1); // 允许调用currying时就传入多个参数
        let length = fn.length; // 获取被柯里化函数的参数长度
        let closure = function() {
            argsArr = argsArr.concat(...arguments); // 先把参数拼接到一个数组

            console.log(argsArr.length, length);

            if (argsArr.length < length) return closure; // 如果参数没满，返回闭包等待下一次调用

            return fn.apply(null, argsArr); // 如果参数满了，传递完成，执行fn函数并传入所有参数
        };

        return closure;
    }
    /* say 接收3个参数 */
    function say(company, academy, name) {
        console.log(`我的公司是${company},职业是${academy},名字叫做${name}`);
        console.log(arguments);
    }

    //currying
    let array = ["array", "object", "function"];
    let setInfo2 = currying(say, "fff");
    let s2 = setInfo2("ggg");
    s2("hhh", "额外传入的参数44");

    let setInfo3 = currying(say);
    let a2 = setInfo3("aaa")("bbb");
    a2("ccc");
</script>
</body>
</html>
